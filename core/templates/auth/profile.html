{% extends "core/base.html" %} {% block content %} {% load static %}
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"
  integrity="sha512-M7nHCiNUOwFt6Us3r8alutZLm9qMt4s9951uo8jqO4UwJ1hziseL6O3ndFyigx6+LREfZqnhHxYjKRJ8ZQ69DQ=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
></script>
<div class="flex flex-col md:flex-row h-full">
  <form
    class="w-full md:w-1/2 p-4 md:p-20"
    hx-target="this"
    hx-swap="outerHTML"
  >
    <div class="flex justify-between">
      <p class="text-3xl text-customOrange font-bold mb-4">My Profile</p>
      <div class="flex justify-end items-start">
        <button
          hx-get="/profile/edit"
          class="w-16 h-16 bg-customOrange text-white rounded-full flex flex-col justify-center items-center hover:bg-customOrange/80"
        >
          <img src="{% static 'core/edit.svg' %}" alt="edit" />
          <p>edit</p>
        </button>
      </div>
    </div>
    <div class="mb-4">
      <label for="username" class="block mb-2 text-2xl font-medium text-primary"
        >Username</label
      >
      <input
        type="text"
        id="username"
        name="username"
        class="w-full px-3 py-2 border rounded-md text-xl"
        value="{{user.username}}"
        disabled
      />
    </div>
    <div class="mb-4">
      <label for="email" class="block mb-2 text-2xl font-medium text-primary"
        >Email</label
      >
      <input
        type="text"
        id="email"
        name="email"
        class="w-full px-3 py-2 border rounded-md text-xl"
        value="{{user.email}}"
        disabled
      />
    </div>
    <div class="mb-4">
      <label
        for="firstname"
        class="block mb-2 text-2xl font-medium text-primary"
        type="number"
        >Firstname</label
      >
      <input
        type="text"
        id="email"
        name="email"
        class="w-full px-3 py-2 border rounded-md text-xl"
        value="{{user.first_name}}"
        disabled
      />
    </div>
    <div class="mb-4">
      <label for="lastname" class="block mb-2 text-2xl font-medium text-primary"
        >Lastname</label
      >
      <input
        type="text"
        id="email"
        name="email"
        class="w-full px-3 py-2 border rounded-md text-xl"
        value="{{user.last_name}}"
        disabled
      />
    </div>
    <div class="mb-4">
      <a href="{% url 'logout' %}" class="">
        <div
          class="w-full flex justify-center py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-secondary"
        >
          Logout
        </div>
      </a>
    </div>
  </form>

  <div class="w-full md:w-1/2 bg-secondary p-4 md:p-20 pb-20">
    <p class="text-3xl text-white font-bold">Dashboard</p>
    <div class="bg-white w-full mt-4 rounded-lg p-4 flex">
      <div class="flex flex-col w-1/2 p-4 gap-4">
        <div class="flex flex-col">
          <div class="flex items-center">
            <div class="w-4 h-4 bg-primary rounded-md mr-2"></div>
            <p class="text-primary text-xl">Documentary</p>
          </div>
          <p class="text-2xl text-primary">12.5%</p>
        </div>
        <div class="flex flex-col">
          <div class="flex items-center">
            <div class="w-4 h-4 bg-customOrange rounded-md mr-2"></div>
            <p class="text-customOrange text-xl">Novel</p>
          </div>
          <p class="text-2xl text-customOrange">23.3%</p>
        </div>
        <div class="flex flex-col">
          <div class="flex items-center">
            <div class="w-4 h-4 bg-cream rounded-md mr-2"></div>
            <p class="text-cream text-xl">Comic</p>
          </div>
          <p class="text-2xl text-cream">64.2%</p>
        </div>
      </div>
      <svg class="w-1/2" id="piechart"></svg>
    </div>
    <script>
      const data = [
        { name: "Documentary", value: 12.5 },
        { name: "Novel", value: 23.3 },
        { name: "Comic", value: 64.2 },
      ];

      const width = 256;
      const height = 256;
      const radius = Math.min(width, height) / 2;

      const svg = d3
        .select("#piechart")
        .attr("viewBox", [0, 0, width, height])
        .append("g")
        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

      const color = d3
        .scaleOrdinal()
        .domain(data.map((d) => d.name))
        .range(["#026C80", "#ED6335 ", "#ECAE7D"]);

      const pie = d3.pie().value((d) => d.value);

      const arcs = pie(data);

      svg
        .selectAll("path")
        .data(arcs)
        .enter()
        .append("path")
        .attr("d", d3.arc().innerRadius(0).outerRadius(radius))
        .attr("fill", (d) => color(d.data.name));
    </script>
  </div>
</div>

{% endblock %}
